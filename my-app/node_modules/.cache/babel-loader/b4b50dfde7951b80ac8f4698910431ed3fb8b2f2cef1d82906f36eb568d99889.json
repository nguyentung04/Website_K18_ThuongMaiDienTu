{"ast":null,"code":"var _jsxFileName = \"E:\\\\DU-AN-TOT-NGHIEP\\\\Website_K18_ThuongMaiDienTu\\\\my-app\\\\src\\\\pages\\\\Auth\\\\Signin.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Box, Button, FormControl, FormLabel, Heading, Input, useToast, VStack, HStack, Text, Link } from '@chakra-ui/react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SignIn = () => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const toast = useToast();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await fetch('http://localhost:3000/api/loginAdmin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Đăng nhập không thành công');\n      }\n      const data = await response.json();\n      if (data.token) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('username', username); // Lưu tên đăng nhập vào localStorage\n        localStorage.setItem('role', data.role); // Lưu vai trò vào localStorage\n\n        toast({\n          title: 'Đăng nhập thành công!',\n          status: 'success',\n          duration: 3000,\n          isClosable: true\n        });\n\n        // Điều hướng dựa trên vai trò\n        if (data.role === 'admin') {\n          navigate('/admin');\n        } else {\n          navigate('/'); // Hoặc một trang khác dành cho người dùng\n        }\n      } else {\n        setError(data.message || 'Đăng nhập thất bại');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      setError('Có lỗi xảy ra');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    maxW: \"lg\",\n    mx: \"auto\",\n    mt: \"8\",\n    p: \"6\",\n    borderWidth: \"1px\",\n    borderRadius: \"lg\",\n    children: [/*#__PURE__*/_jsxDEV(Heading, {\n      textAlign: \"center\",\n      mb: \"6\",\n      children: \"\\u0110\\u0103ng nh\\u1EADp\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VStack, {\n      spacing: \"4\",\n      as: \"form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(FormControl, {\n        isRequired: true,\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          htmlFor: \"username\",\n          children: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"username\",\n          type: \"text\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          placeholder: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        isRequired: true,\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          htmlFor: \"password\",\n          children: \"M\\u1EADt kh\\u1EA9u\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"password\",\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          placeholder: \"M\\u1EADt kh\\u1EA9u\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Text, {\n        color: \"red.500\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        colorScheme: \"teal\",\n        size: \"lg\",\n        width: \"full\",\n        children: \"\\u0110\\u0103ng nh\\u1EADp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(SignIn, \"2OPZvHJDl9WaovIKhZ/BeorpCXM=\", false, function () {\n  return [useNavigate, useToast];\n});\n_c = SignIn;\nexport default SignIn;\nvar _c;\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"names":["React","useState","useNavigate","Box","Button","FormControl","FormLabel","Heading","Input","useToast","VStack","HStack","Text","Link","jsxDEV","_jsxDEV","SignIn","_s","username","setUsername","password","setPassword","error","setError","navigate","toast","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","token","localStorage","setItem","role","title","status","duration","isClosable","message","console","maxW","mx","mt","p","borderWidth","borderRadius","children","textAlign","mb","fileName","_jsxFileName","lineNumber","columnNumber","spacing","as","onSubmit","isRequired","htmlFor","id","type","value","onChange","target","placeholder","color","colorScheme","size","width","_c","$RefreshReg$"],"sources":["E:/DU-AN-TOT-NGHIEP/Website_K18_ThuongMaiDienTu/my-app/src/pages/Auth/Signin.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  Button,\r\n  FormControl,\r\n  FormLabel,\r\n  Heading,\r\n  Input,\r\n  useToast,\r\n  VStack,\r\n  HStack,\r\n  Text,\r\n  Link\r\n} from '@chakra-ui/react';\r\n\r\nconst SignIn = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n  const toast = useToast();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:3000/api/loginAdmin', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Đăng nhập không thành công');\r\n      }\r\n\r\n      const data = await response.json();\r\n      if (data.token) {\r\n        localStorage.setItem('token', data.token);\r\n        localStorage.setItem('username', username); // Lưu tên đăng nhập vào localStorage\r\n        localStorage.setItem('role', data.role); // Lưu vai trò vào localStorage\r\n       \r\n        toast({\r\n          title: 'Đăng nhập thành công!',\r\n          status: 'success',\r\n          duration: 3000,\r\n          isClosable: true,\r\n        });\r\n\r\n        // Điều hướng dựa trên vai trò\r\n        if (data.role === 'admin') {\r\n          navigate('/admin');\r\n        } else {\r\n          navigate('/'); // Hoặc một trang khác dành cho người dùng\r\n        }\r\n      } else {\r\n        setError(data.message || 'Đăng nhập thất bại');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setError('Có lỗi xảy ra');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box maxW=\"lg\" mx=\"auto\" mt=\"8\" p=\"6\" borderWidth=\"1px\" borderRadius=\"lg\">\r\n      <Heading textAlign=\"center\" mb=\"6\">Đăng nhập</Heading>\r\n      <VStack spacing=\"4\" as=\"form\" onSubmit={handleSubmit}>\r\n        <FormControl isRequired>\r\n          <FormLabel htmlFor=\"username\">Tên đăng nhập</FormLabel>\r\n          <Input\r\n            id=\"username\"\r\n            type=\"text\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            placeholder=\"Tên đăng nhập\"\r\n          />\r\n        </FormControl>\r\n        <FormControl isRequired>\r\n          <FormLabel htmlFor=\"password\">Mật khẩu</FormLabel>\r\n          <Input\r\n            id=\"password\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            placeholder=\"Mật khẩu\"\r\n          />\r\n        </FormControl>\r\n        {error && <Text color=\"red.500\">{error}</Text>}\r\n        <Button\r\n          type=\"submit\"\r\n          colorScheme=\"teal\"\r\n          size=\"lg\"\r\n          width=\"full\"\r\n        >\r\n          Đăng nhập\r\n        </Button>\r\n        \r\n      </VStack>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default SignIn;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}